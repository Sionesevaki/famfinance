# Example .env for `infra/docker/docker-compose.coolify.example.yml`
#
# Copy these into Coolify environment variables for the Docker Compose resource.

# Image tag published to GHCR (api/worker/migrate must share the same tag)
TAG=staging-20251219-1

# App DB
POSTGRES_USER=famfinance
POSTGRES_PASSWORD=famfinance
POSTGRES_DB=famfinance

# Keycloak DB
KC_POSTGRES_USER=keycloak
KC_POSTGRES_PASSWORD=keycloak
KC_POSTGRES_DB=keycloak

# MinIO
MINIO_ROOT_USER=minio
MINIO_ROOT_PASSWORD=minio123
S3_BUCKET=famfinance
#
# Internal endpoint (reachable from the API/worker container).
# If MinIO runs in the same Compose stack, this is typically:
#   S3_ENDPOINT=http://minio:9000
S3_ENDPOINT=http://minio:9000
#
# Presigned URLs must be reachable from the browser.
# If your API talks to MinIO on the Docker network (`http://minio:9000`), set this to your public MinIO domain:
#   S3_PRESIGN_ENDPOINT=https://minio.yourdomain.com
S3_PRESIGN_ENDPOINT=https://minio.yourdomain.com
#
# If your S3/MinIO URL uses a self-signed TLS certificate, set this to true (not recommended long-term).
S3_ALLOW_SELF_SIGNED=false

# base64 32 bytes, e.g. `openssl rand -base64 32`
TOKEN_ENCRYPTION_KEY=AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=

# Keycloak admin + external hostname (the URL users hit, behind TLS)
KEYCLOAK_ADMIN=admin
KEYCLOAK_ADMIN_PASSWORD=admin
KC_HOSTNAME=keycloak.fafiy.com
KEYCLOAK_ISSUER=https://keycloak.fafiy.com/realms/family-finance
KEYCLOAK_JWKS_URI=https://keycloak.fafiy.com/realms/family-finance/protocol/openid-connect/certs
KEYCLOAK_AUDIENCE=api

# CORS and OAuth redirect allowlist
CORS_ORIGINS=https://fafiy.com,https://www.fafiy.com,http://localhost:3001
OAUTH_ALLOWED_REDIRECT_URIS=https://fafiy.com/oauth/callback
